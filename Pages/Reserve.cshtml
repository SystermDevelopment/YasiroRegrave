@page
@model YasiroRegrave.Pages.Index1Model
@{
    ViewData["Title"] = "予約のお申し込み";
}

<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="./css/Reserve.css">
<link rel="stylesheet" href="./css/Reserve-sp.css" media="only screen and (max-width: 768px)">

<header>
    <h1>空き区画仮予約のお申し込み</h1>
</header>
<main>
    <section>
        <h2>電話でのご予約も可能です</h2>
        <img src="~/images/PhoneNumber.png" alt="Sidebar Icon">
        <h2>メールでのご予約</h2>
        <p1>下記フォームに必要事項を入力の上、「確認画面へ」ボタンを押してください。*印は必須項目です。</p1>
    </section>
    <section>

        <form method="post" id="reservation-form">
            <label for="section-number">ご希望の区画番号</label>
            <input type="text" id="section-number" name="section-number" value="親鸞Ｅ区 ８列-０３" disabled>

            <label for="last-name">*お名前（全角）</label>
            <div class="name-wrapper">
                <div class="name-group">
                    <label for="last-name">姓：</label>
                    <input type="text" id="last-name" name="last-name" asp-for="LastName" placeholder="生駒">
                    <span asp-validation-for="LastName" class="text-danger"></span>
                </div>
                <div class="name-group">
                    <label for="first-name">名：</label>
                    <input type="text" id="first-name" name="first-name" asp-for="FirstName" placeholder="太郎">
                    <span asp-validation-for="FirstName" class="text-danger"></span>
                </div>
            </div>

            <label for="last-name-kana">*お名前(ふりがな)</label>
            <div class="name-wrapper">
                <div class="name-group">
                    <label for="last-name-kana">せい：</label>
                    <input type="text" id="last-name-kana" name="last-name-kana" asp-for="LastNameKana" placeholder="いこま">
                    <span asp-validation-for="LastNameKana" class="text-danger"></span>
                </div>
                <div class="name-group">
                    <label for="first-name-kana">めい：</label>
                    <input type="text" id="first-name-kana" name="first-name-kana" asp-for="FirstNameKana" placeholder="たろう">
                    <span asp-validation-for="FirstNameKana" class="text-danger"></span>
                </div>
            </div>

            <label for="postal-code">
                <span>郵便番号</span>
                <span>必須</span>
            </label>
            <div class="postal-code-wrapper">
                <input type="text" id="postal-code" name="postal-code" asp-for="PostalCode" placeholder="例）123-4567">
                <button type="button" id="auto-fill">住所を自動入力</button>
            </div>
            <span asp-validation-for="PostalCode" class="text-danger postal-code-error"></span>

            <label for="prefecture">*都道府県</label>
            <input type="text" id="prefecture" name="prefecture" asp-for="Prefecture" placeholder="例）大阪府">
            <span asp-validation-for="Prefecture" class="text-danger"></span>

            <label for="city">*市区郡</label>
            <input type="text" id="city" name="city" asp-for="City" placeholder="例）四条畷市">
            <span asp-validation-for="City" class="text-danger"></span>

            <label for="address">*町名・番地</label>
            <input type="text" id="address" name="address" asp-for="Address" placeholder="例）1366番地">
            <span asp-validation-for="Address" class="text-danger"></span>

            <label for="building">ビル・マンション名</label>
            <input type="text" id="building" name="building" placeholder="例）大阪生駒霊園">

            <label for="phone">*電話番号</label>
            <input type="tel" id="phone" name="phone" asp-for="Phone" placeholder="例）0120-758-948">
            <span asp-validation-for="Phone" class="text-danger"></span>

            <label for="email">Eメール</label>
            <input type="email" id="email" name="email" placeholder="例）info@abcd.com">

            <label for="date1">希望日①</label>
            <input type="date" id="date1" name="date1">

            <label for="time1">希望時間①</label>
            <select id="time1" name="time1">
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
            </select>

            <label for="date2">希望日②</label>
            <input type="date" id="date2" name="date2">

            <label for="time2">希望時間②</label>
            <select id="time2" name="time2">
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
            </select>

            <label for="date3">希望日③</label>
            <input type="date" id="date3" name="date3">

            <label for="time3">希望時間③</label>
            <select id="time3" name="time3">
                <option value="09:00">09:00</option>
                <option value="10:00">10:00</option>
                <option value="11:00">11:00</option>
                <option value="12:00">12:00</option>
                <option value="13:00">13:00</option>
                <option value="14:00">14:00</option>
                <option value="15:00">15:00</option>
                <option value="16:00">16:00</option>
            </select>


            <label for="inquiry">ご相談・お問い合わせ内容</label>
            <textarea id="inquiry" name="inquiry"></textarea>


            <div class="email-note">
                <p>携帯メールアドレスをご入力の場合、携帯の設定により返信メールが届かないことがございます。</p>
                <p>弊社からのメール（yasiro.co.jp）を受信できるよう設定をお願いいたします。</p>
            </div>
            <form method="post" id="reservation-form" onsubmit="return validateForm()">

                <label for="contact-methods">ご希望の連絡方法 <span class="note">※複数回答可</span></label>
                <div class="contact-options">
                    <div>
                        <input type="checkbox" id="contact-phone" name="contact-method" value="phone">
                        <label for="contact-phone">電話</label>
                    </div>
                    <div>
                        <input type="checkbox" id="contact-email" name="contact-method" value="email">
                        <label for="contact-email">メール</label>
                    </div>
                </div>
                <label for="email-subscription">メール配信</label>
                <div class="subscription-options">
                    <p>メール限定キャンペーンなどの最新情報や、これからの供養に役立つ終活情報をお届けします。</p>
                    <div>
                        <input type="radio" id="subscribe-yes" name="email-subscription" value="yes" checked>
                        <label for="subscribe-yes">受信する</label>
                    </div>
                    <div>
                        <input type="radio" id="subscribe-no" name="email-subscription" value="no">
                        <label for="subscribe-no">受信しない</label>
                    </div>
                </div>
            </form>
        </form>
        <div class="button-wrapper">
            <button type="submit" class="submit-button" form="reservation-form">確認画面へ</button>
        </div>

        <img src="~/images/PhoneNumber.png" alt="Sidebar Icon">

    </section>
</main>

<script>
    document.getElementById('auto-fill').addEventListener('click', function () {
        const postalCode = document.getElementById('postal-code').value;
        fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${postalCode}`)
            .then(response => response.json())
            .then(data => {
                if (data.results) {
                    const result = data.results[0];
                    document.getElementById('prefecture').value = result.address1;
                    document.getElementById('city').value = result.address2;
                    document.getElementById('address').value = result.address3;
                } else {
                    alert('住所が見つかりませんでした。');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('住所の取得に失敗しました。');
            });
    });
</script>
