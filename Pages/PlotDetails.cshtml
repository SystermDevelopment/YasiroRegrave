@page
@model PlotDetailsModel
@{
}
<link href="~/css/PlotDetails.css" rel="stylesheet">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

<div id="PlotDetailsHeader">
    <div id="PlotDetailsTitle">
        @Model.SectionName<br>空き区画状況
    </div>
</div>
<div id="PlotDetailsContainer">
    @{
        var sectionname = "";
        var thumbnail = "";
        if (Model.SectionDatas != null)
        {
            thumbnail = "images/THUMB_" + Model.SectionDatas.ReienCode + "_" + Model.SectionDatas.AreaCode + "_" + Model.SectionDatas.SectionCode + ".png";
            sectionname = Model.SectionDatas.SectionName;
        }
    }
    <img src="@thumbnail" style="border: 1px solid black;" alt="選択区画">
    <img src="images/figure1.png">
    <div id="map-container" style="width: 517px; height: 759px;"></div>
    <img src="images/figure2.png">
</div>

@for (var i = 0; i < Model.CemeteryDatas.Count; i++)
{
    var cemetery = Model.CemeteryDatas[i];
    <div class="PlotInfoContainer" id="table-container-@(cemetery.CemeteryCode)" style="display: none;">
        <p class="district-name" id="district-name-@(i)">@sectionname @cemetery.CemeteryName</p>
        <div class="image-content">
            <div class="image-container" id="image-container1-@(i)">
                <img src="images/pic@(i * 2 + 1).png" alt="区画@(i * 2 + 1)の画像" class="image">
            </div>
            <div class="image-container" id="image-container2-@(i)">
                <img src="images/pic@(i * 2 + 2).png" alt="区画@(i * 2 + 2)の画像" class="image">
            </div>
            <table class="data-table" id="table@(i)">
                <caption>墓地・墓石セット価格</caption>
                <tr>
                    <th>面積</th>
                    <td>@cemetery.AreaValue</td>
                </tr>
                <tr>
                    <th>墓地使用料</th>
                    <td>¥@string.Format("{0:#,0}", cemetery.UsageFee)</td>
                </tr>
                <tr>
                    <th>永代管理料</th>
                    <td>¥@string.Format("{0:#,0}", cemetery.ManagementFee)</td>
                </tr>
                <tr>
                    <th>墓石セット価格</th>
                    <td>¥@string.Format("{0:#,0}", cemetery.SetPrice)</td>
                </tr>
                <tr>
                    <th>合計</th>
                    <td style="color: red;">¥@string.Format("{0:#,0}", cemetery.TotalPrice)</td>
                </tr>
            </table>
        </div>
        <div class="button-container">
            <button class="button-visit" onclick="window.location.href='Reserve';">見学予約のお申込み</button>
            <button class="button-reserve" onclick="window.location.href='Reserve';">仮予約のお申込み</button>
        </div>
    </div>
}

<script>
    function unescapeHtml(html) {
        var tempElement = document.createElement('textarea');
        tempElement.innerHTML = html;
        return tempElement.value;
    }
    var ReienCode = '@Model.ReienCode';
    var AreaCode = '@Model.AreaCode';
    var SectionCode = unescapeHtml('@Html.Raw(Model.SectionCode)');
    var CemeteryDatas = @Html.Raw(Json.Serialize(Model.CemeteryDatas));
</script>
<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="~/js/PlotDetails.js"></script>
